
【安装】
	apt install mysql-server
	apt install mysql-client

【配置外网访问】
改配置文档
	sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf
	bind-address参数的值改成你的内/外网IP或0.0.0.0,或者直接注释掉这行.
	
修改允许用户的访问IP
	select user,host from user;
	update user set host='%' where user='root';
	flush privileges;
	
授权用户用 xxx-pwd 密码登录
	GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'xxx-pwd' WITH GRANT OPTION;


【程序管理命令】
查看是否运行
	ps -ef | grep mysqld

启动
	root@host# cd /usr/bin
	./mysqld_safe &

关闭
	root@host# cd /usr/bin
	./mysqladmin -u root -p shutdown

登录
	mysql -u root -p

退出
	\q
	exit

【管理用户】
查看用户
	use user;
	select user, host from user;

更改用户密码 V5.7
	ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '!xxx.db*';
	flush privileges;
	-- 下面的方法不行？
	-- 格式：mysql> set password for 用户名@localhost = password('新密码'); 
	-- 例子：mysql> set password for root@localhost = password('123');

注意：在 mysql client 终端上，所有的命令要加“分号”结束


【db命令】
显示所有数据库
	show databases;
	
显示数据库中所有的表
	show tables;

操作某个表
	use 数据表;

显示数据表的属性，属性类型，主键信息 ，是否为 NULL，默认值等其他信息。
	show columns from 数据表;
	
显示数据表的详细索引信息，包括PRIMARY KEY（主键）。
	show index from 数据表;

创建数据库
	create database 数据库名;

创建数据表
	create table table_name(column_name column_type);

导入sql数据。登录后，use xxDB
	source /tmp/xx.sql
导出数据到sql
	mysqldump -u 用户名 -p 数据库名 > 导出的文件名
	（输入后会让你输入进入MySQL的密码）
	（如果导出单张表的话在数据库名后面输入表名即可）

【binlog】
分析 binlog 文件
	mysqlbinlog --no-defaults --database=db  --base64-output=decode-rows -v --start-datetime='2019-04-11 00:00:00' --stop-datetime='2019-04-11 15:00:00'  mysql-bin.000007 | more

解析并保存在 sql 文件中
	mysqlbinlog --no-defaults --database=db  --base64-output=decode-rows -v --start-datetime='2019-04-11 00:00:00' --stop-datetime='2019-04-11 15:00:00'  mysql-bin.000007 >/tmp/binlog007.sql

从 binlog 恢复数据
	mysqlbinlog /tmp/mysql-bin.000010 | mysql -uroot -p  


【连接字符串】
    url: jdbc:mysql://127.0.0.1:3306/vplusdb?xxx
		serverTimezone=GMT%2B8
		&useUnicode=true
		&characterEncoding=utf-8
		&useSSL=false
		&allowPublicKeyRetrieval=true
		&autoReconnect=true
		&failOverReadOnly=false
    username: root
    password: 123456
    #driver-class-name: com.mysql.jdbc.Driver
    driver-class-name: com.mysql.cj.jdbc.Driver
	
代码生成器
	jdbc:mysql://127.0.0.1:3306/hrone?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=UTC
	jdbc:mysql://127.0.0.1:3306/hrone?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
	注意加上的的多余 属性
springboot
	url: jdbc:mysql://127.0.0.1:3306/hrone?serverTimezone=GMT%2B8&useSSL=false&allowPublicKeyRetrieval=true


【windows  下面命令】
启动命令
	net start mysql
关闭命令
	net stop mysql


【mysql explain】sql语句的执行效率预判
1. id：id相同，执行顺序由上至下；id不同，id的序号会递增，id值越大优先级越高，越先被执行。
2. select_type：主要是用于区别普通查询、联合查询、子查询等的复杂查询。
3. table：指的就是当前执行的表。
4★ type： 显示的是查询使用了哪种访问类型。
const > eq_ref > ref > range > index > ALL

5. possible_keys：显示可能应用在这张表中的索引。如果为空，没有可能的索引。
6. key： 实际使用的索引。如果为NULL，则没有使用索引。
7. key_len：使用的索引的长度。在不损失精确性的情况下，长度越短越好。
8. ref：显示索引的哪一列被使用了。
9. rows：必须检查的用来返回请求数据的行数。

10★ Extra：解析查询的额外信息。
using index > using where > using filesort > using temporary


